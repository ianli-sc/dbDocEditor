# 天猫交易-下单（服务）
* 文档版本号：1.0.0

## 总览
* 作者：仙羽

### 功能
* 某些商品会同时出售服务(例如3C电器城类目)
* 服务分两种：`店家强制赠送`和`用户花钱购买`
  * `店家强制赠送`默认选中默认展示不可修改
  * `用户花钱购买`默认不选中
* 服务的层，默认是收缩的，点击修改时展开
  * 收缩状态展示当前购买了服务的名字 和总价格
  * 展开状态展示每个服务的名称，描述和单价，和总价

### 函数
#### 外部函数
* `render` 渲染收缩的服务
* `toggle` 收放服务，进行服务的修改
* `select` 选中某个服务
  * `Model.calculate();`不同服务价格不一样，需要进行价格计算

#### 事件监听
* `Model.on('fillOrderData',` 局部刷新的数据填充，触发服务的计算
* `Model.on('updateOrderData',` 更新商品数据时的响应
  * 计算服务
  * 更新服务的内容

#### 内部函数
* `getRootEl` 获取当前服务的根节点
* `getOrderIdByRoot`通过根节点获取服务对应的订单的id
* `getOrderDataById` 通过订单id获取订单数据
* `calculate` 根据订单的数据来计算服务的总价
  * `updateOrderAttr` 跟新订单的服务信息数据
* `updateOrderAttr` 更新服务总价服务类型和服务列表
* `renderExpand` `toggle`时渲染展开状态的服务
* `renderCollapse` `toggle`时渲染收缩状态的服务
* `updateHtml` 更新总价和服务列表的内容

### 本文档相关：
* 修改记录：
  * 130903 承风 创建了文档






